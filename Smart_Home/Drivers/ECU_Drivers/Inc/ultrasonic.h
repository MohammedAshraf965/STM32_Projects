/*		Project: Smart Home Application
 * 		File: ultrasonic.h
 *
 *      Author: Mohammed Ashraf
 *      Description: C header file for the ultrasonic sensor module
 */


#ifndef ECU_DRIVERS_INC_ULTRASONIC_H_
#define ECU_DRIVERS_INC_ULTRASONIC_H_


/************************************************************************************************
*************************************** Section: Includes ***************************************
************************************************************************************************/

#include "stm32f4xx_hal.h"
#include "../Std_Types.h"

/**********************************************************************************************************
*************************************** Section: Macro Declarations ***************************************
**********************************************************************************************************/

#define HCSR04_UNITS		1

/*******************************************************************************************************
*************************************** Section: Macro Functions ***************************************
*******************************************************************************************************/


/**************************************************************************************************
*************************************** Section: Data Types ***************************************
**************************************************************************************************/

typedef struct
{
	GPIO_TypeDef *GPIOx;
	uint16_t TRIG_PIN;
	TIM_TypeDef *TIM;
	uint32_t IC_TIM_CH;
	uint32_t TIM_CLK_MHZ;
}HCSR04_t;

/*************************************************************************************************************
*************************************** Section: Function Declarations ***************************************
*************************************************************************************************************/

Std_ReturnType HCSR04_Init(uint8_t HCSR04_Instance, TIM_HandleTypeDef *TIM_Handle);
Std_ReturnType HCSR04_Trigger(uint8_t HCSR04_Instance);
Std_ReturnType HCSR04_TIM_OVF_ISR(TIM_HandleTypeDef *htim);
Std_ReturnType HCSR04_TIM_IC_ISR(TIM_HandleTypeDef *htim);
float HCSR04_Read(uint8_t HCSR04_Instance);


#endif /* ECU_DRIVERS_INC_ULTRASONIC_H_ */
